import { Canvas, Meta, Story } from "@storybook/addon-docs";
import prettierBabel from "prettier/parser-babel";
import prettier from "prettier/standalone";
import * as ReactDOMServer from "react-dom/server";
import ContactTimeline from "../index";
import pkg from "../../package.json";

export const exampleArgs = {
  todayLabel: "vandaag",
  items: [
    {
      id: "1",
      title: "Herinnering: Geef informatie",
      channel: "mail",
      isoDate: new Date().toISOString(),
      description: "Hier komt de uitgebreide beschrijving",
      sender: "Gemeente Den Haag",
    },
    {
      id: "2",
      title: "Geef informatie",
      channel: "mail",
      isoDate: "2023-01-23T09:17:03.137Z",
      description: "Hier komt de uitgebreide beschrijving",
      sender: "Gemeente Den Haag",
    },
    {
      id: "3",
      title: "Tip: u heeft recht op extra subsidie, zie hier een extra lange regel",
      channel: "mail",
      isoDate: "2023-01-06T09:17:03.137Z",
      description:
        "Hier komt de uitgebreide beschrijving, en hier een extra lange uitgebreide beschrijving. Hier komt de uitgebreide beschrijving, en hier een extra lange uitgebreide beschrijving.",
      sender: "Gemeente Den Haag",
    },
    {
      id: "4",
      title: "Status is veranderd",
      channel: "mail",
      isoDate: "2022-12-01T09:17:03.137Z",
      description: "Hier komt de uitgebreide beschrijving",
      sender: "Gemeente Den Haag",
    },
    {
      id: "5",
      title: "Mijn vraag",
      channel: "vraag",
      isoDate: "2022-11-29T09:17:03.137Z",
      description: "Hier komt de uitgebreide beschrijving",
      sender: "Anna Klap",
    },
    {
      id: "6",
      title: "Gesprek over afspraak met adviseur",
      channel: "telefoon",
      isoDate: "2022-11-12T09:17:03.137Z",
      description: "Hier komt de uitgebreide beschrijving",
      sender: "Gemeente Den Haag",
    },
    {
      id: "7",
      title: "Kosten onderzoek en verbeteringen",
      channel: "brief",
      isoDate: "2022-11-10T09:17:03.137Z",
      description: "Hier komt de uitgebreide beschrijving",
      sender: "Gemeente Den Haag",
    },
  ],
};

export const Template = (args) => {
  return <ContactTimeline {...args}></ContactTimeline>;
};

<Meta
  title="CSS/Process Steps/Contact Timeline"
  component={ContactTimeline}
  parameters={{
    componentSubtitle: `${pkg.name} - ${pkg.version}`,
    docs: {
      source: { type: "dynamic" },
      transformSource: (src, storyContext) => {
        // Ensure valid HTML in the Preview source
        if (storyContext.component) {
          return prettier.format(
            ReactDOMServer.renderToStaticMarkup(storyContext.component(storyContext.parameters.args)),
            { parser: "babel", plugins: [prettierBabel] },
          );
        }
        return src;
      },
    },
    status: {
      type: "EXPERIMENTAL",
    },
  }}
/>

# Contact Timeline

## Default

<Canvas>
  <Story name="Default" args={exampleArgs}>
    {Template.bind({})}
  </Story>
</Canvas>

## Collapsible

<Canvas>
  <Story name="Collapsible" args={{ ...exampleArgs, collapsible: true }}>
    {Template.bind({})}
  </Story>
</Canvas>

## Collapsible with expanded item

<Canvas>
  <Story name="Collapsible with expanded item" args={{ ...exampleArgs, collapsible: true, expandedItems: ["3"] }}>
    {Template.bind({})}
  </Story>
</Canvas>

## Without sender

<Canvas>
  <Story
    name="Without sender"
    args={{
      todayLabel: "vandaag",
      collapsible: true,
      expandedItems: ["4"],
      items: [
        {
          id: "1",
          title: "Herinnering: Geef informatie",
          channel: "mail",
          isoDate: new Date().toISOString(),
          description: "Hier komt de uitgebreide beschrijving",
        },
        {
          id: "2",
          title: "Geef informatie",
          channel: "mail",
          isoDate: "2023-01-23T09:17:03.137Z",
          description: "Hier komt de uitgebreide beschrijving",
        },
        {
          id: "3",
          title: "Tip: u heeft recht op extra subsidie, zie hier een extra lange regel",
          channel: "mail",
          isoDate: "2023-01-06T09:17:03.137Z",
          description:
            "Hier komt de uitgebreide beschrijving, en hier een extra lange uitgebreide beschrijving. Hier komt de uitgebreide beschrijving, en hier een extra lange uitgebreide beschrijving.",
        },
        {
          id: "4",
          title: "Status is veranderd",
          channel: "mail",
          isoDate: "2022-12-01T09:17:03.137Z",
          description: "Hier komt de uitgebreide beschrijving",
        },
        {
          id: "5",
          title: "Mijn vraag",
          channel: "vraag",
          isoDate: "2022-11-29T09:17:03.137Z",
          description: "Hier komt de uitgebreide beschrijving",
        },
        {
          id: "6",
          title: "Gesprek over afspraak met adviseur",
          channel: "telefoon",
          isoDate: "2022-11-12T09:17:03.137Z",
          description: "Hier komt de uitgebreide beschrijving",
        },
        {
          id: "7",
          title: "Kosten onderzoek en verbeteringen",
          channel: "brief",
          isoDate: "2022-11-10T09:17:03.137Z",
          description: "Hier komt de uitgebreide beschrijving",
        },
      ],
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## With file

<Canvas>
  <Story
    name="With file"
    args={{
      todayLabel: "vandaag",
      collapsible: true,
      expandedItems: ["4"],
      items: [
        {
          id: "1",
          title: "Herinnering: Geef informatie",
          channel: "mail",
          isoDate: new Date().toISOString(),
          description: "Hier komt de uitgebreide beschrijving",
          sender: "Gemeente Den Haag",
        },
        {
          id: "2",
          title: "Geef informatie",
          channel: "mail",
          isoDate: "2023-01-23T09:17:03.137Z",
          description: "Hier komt de uitgebreide beschrijving",
          sender: "Gemeente Den Haag",
        },
        {
          id: "3",
          title: "Tip: u heeft recht op extra subsidie, zie hier een extra lange regel",
          channel: "mail",
          isoDate: "2023-01-06T09:17:03.137Z",
          description:
            "Hier komt de uitgebreide beschrijving, en hier een extra lange uitgebreide beschrijving. Hier komt de uitgebreide beschrijving, en hier een extra lange uitgebreide beschrijving.",
          sender: "Gemeente Den Haag",
        },
        {
          id: "4",
          title: "Status is veranderd",
          channel: "mail",
          isoDate: "2022-12-01T09:17:03.137Z",
          description: "Hier komt de uitgebreide beschrijving",
          sender: "Gemeente Den Haag",
          file: (
            <File
              name="example3"
              link="test.png"
              extension="png"
              size={2000}
              lastUpdated="Thu Aug 31 2023 11:22:11 GMT+0200"
            />
          ),
        },
        {
          id: "5",
          title: "Mijn vraag",
          channel: "vraag",
          isoDate: "2022-11-29T09:17:03.137Z",
          description: "Hier komt de uitgebreide beschrijving",
          sender: "Anna Klap",
        },
        {
          id: "6",
          title: "Gesprek over afspraak met adviseur",
          channel: "telefoon",
          isoDate: "2022-11-12T09:17:03.137Z",
          description: "Hier komt de uitgebreide beschrijving",
          sender: "Gemeente Den Haag",
        },
        {
          id: "7",
          title: "Kosten onderzoek en verbeteringen",
          channel: "brief",
          isoDate: "2022-11-10T09:17:03.137Z",
          description: "Hier komt de uitgebreide beschrijving",
          sender: "Gemeente Den Haag",
        },
      ],
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
